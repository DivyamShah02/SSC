import requests, pdb

def get_address_from_coordinates(lat, lng, api_key):
    # Geocoding endpoint
    url = f"https://maps.googleapis.com/maps/api/geocode/json"
    params = {  
    'latlng': f'{lat},{lng}',
    'key':api_key
    }
    
    response = requests.get(url, params=params)

    # Check if the request was successful
    if response.status_code == 200:
        # Parse the JSON response
        data = response.json()

        # Check if the API returned any results
        if data['results']:
            # Extract the formatted address
            address = data['results'][0]['formatted_address']
            return address
        else:
            return "No address found for the provided coordinates."
    else:
        return f"Error: {response.status_code}"


final_cords = ['23.039747735763335,72.59647213874429', '22.968747735763248,72.535472138744', '22.97074773576325,72.54447213874404', '22.97074773576325,72.56147213874412', '22.972747735763253,72.5974721387443', '22.973747735763254,72.59147213874427', '22.975747735763257,72.55347213874408', '22.976747735763258,72.55347213874408', '22.97774773576326,72.52047213874393', '22.97874773576326,72.5974721387443', '22.97974773576326,72.56947213874416', '22.980747735763263,72.58547213874424', '22.982747735763265,72.53247213874398', '22.983747735763266,72.58747213874425', '22.984747735763268,72.57047213874417', '22.98574773576327,72.58647213874424', '22.98774773576327,72.58347213874423', '22.988747735763273,72.56047213874412', '22.989747735763274,72.5764721387442', '22.991747735763276,72.56247213874413', '22.992747735763277,72.59147213874427', '22.99374773576328,72.56247213874413', '22.99574773576328,72.5564721387441', '22.996747735763282,72.55447213874409', '22.998747735763285,72.53747213874401', '22.999747735763286,72.52947213874397', '22.999747735763286,72.58147213874422', '23.000747735763287,72.59347213874427', '23.00374773576329,72.52547213874395', '23.004747735763292,72.56147213874412', '23.005747735763293,72.51947213874392', '23.006747735763295,72.5574721387441', '23.007747735763296,72.54847213874406', '23.0097477357633,72.53747213874401', '23.0107477357633,72.57947213874421', '23.0117477357633,72.5564721387441', '23.012747735763302,72.55247213874408', '23.014747735763304,72.55347213874408', '23.015747735763306,72.5554721387441', '23.016747735763307,72.57147213874417', '23.017747735763308,72.5564721387441', '23.01974773576331,72.53347213874399', '23.02074773576331,72.57347213874418', '23.021747735763313,72.56847213874416', '23.023747735763315,72.52547213874395', '23.024747735763317,72.55447213874409', '23.025747735763318,72.54947213874406', '23.02774773576332,72.55247213874408', '23.02874773576332,72.52647213874396', '23.029747735763323,72.59347213874427', '23.031747735763325,72.52347213874394', '23.032747735763326,72.54247213874403', '23.033747735763328,72.58247213874422', '23.03474773576333,72.57947213874421', '23.03574773576333,72.58447213874423', '23.03674773576333,72.59247213874427']

# Example usage
api_key = 'AIzaSyBevStMFDR_VLoRnAeAeJF_OhXARBbLc5k'  # Replace with your API key

frfr = []

for cord in final_cords:
    cord = cord.split(',')
    latitude = cord[0]
    longitude = cord[1]


    address = get_address_from_coordinates(latitude, longitude, api_key)
    print(address)

    frfr.append({'coords':f'{latitude},{longitude}', 'address':address})

pdb.set_trace()
print(frfr)
